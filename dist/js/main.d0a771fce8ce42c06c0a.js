(()=>{"use strict";var t={370:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},963:(t,e,i)=>{t.exports=i.p+"assets/4b31446ace3420d5e426.ico"}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t+"../"})(),i.b=document.baseURI||self.location.href;var n={};(()=>{i.d(n,{bi:()=>T});var t=i(370),e=i.n(t),o=new URL(i(963),i.b);e()(o);var a=function(t,e){this.name=t,this.lastName=e,this.id=Date.now()+Math.floor(470001*Math.random()),this.fullName=this.name+" "+this.lastName},r=[],s=function(t){void 0===t&&(t={title:"UNSET",description:"UNSET",executor:new a("UNSET","UNSET")});var e=t.title,i=t.description,n=t.executor;this.title=e,this.description=i,this.executor=n,this.id=Date.now()+Math.floor(1000001*Math.random())},d={};function c(t,e){d[t]||(d[t]=[]),d[t].push(e)}function l(t,e){return d[t].find((function(t){return t.id===e}))}var u="tasks",m="executors";function p(){localStorage.setItem(u,JSON.stringify(d))}var v,f="visited";!function(t){t.Add="addMode",t.Edit="editMode"}(v||(v={}));var g=document.querySelector(".mainWrapper"),b=document.getElementById("taskForm"),h=document.querySelector(".modalFooter__btnRemove"),k=document.querySelector(".btnAddUpdateTask"),y=document.querySelector(".invalidFormMessage"),x=document.getElementsByName("title")[0],w=document.getElementsByName("description")[0],L=document.querySelector(".executor");function N(t){t.stopPropagation();var e=t.target,i=e.classList.contains("addTask"),n=e.closest(".task"),o=null==n?void 0:n.classList.contains("editTask"),a=e.closest(".column");D();var r=null==a?void 0:a.dataset.columnname;if(b.dataset.columnName=r,i&&(b.dataset.mode=v.Add,h.style.display="none",k.textContent="Add"),o){b.dataset.mode=v.Edit,b.dataset.taskid=n.dataset.taskid;var s=l(r,Number(n.dataset.taskid));x.value=s.title,w.value=s.description,L.value=String(s.executor.id),h.style.display="block",k.textContent="Save"}}function S(t){var e,i=L.value,n=new FormData(b),o=b.dataset.columnName,a=n.get("title"),d=n.get("description"),u=(e=Number(i),r.find((function(t){return t.id===e})));if(!_())return t.stopPropagation(),void t.preventDefault();if(b.dataset.mode===v.Add&&c(o,new s({title:a,description:d,executor:u})),b.dataset.mode===v.Edit){var m=l(o,Number(b.dataset.taskid));m.title=a,m.description=d,m.executor=u}D(),T()}function E(){var t,e,i;window.confirm("Sure?")&&(t=b.dataset.columnName,e=Number(b.dataset.taskid),i=d[t].findIndex((function(t){return t.id===e})),d[t].splice(i,1),D(),T())}function _(){var t=L.value,e=new FormData(b),i=e.get("title"),n=e.get("description");return I(x,!i),I(w,!n),I(L,!t),i&&n&&t?(y.style.visibility="hidden",!0):(y.style.visibility="visible",!1)}function D(){x.value="",w.value="",L.value="",x.classList.toggle(f,!1),w.classList.toggle(f,!1),L.classList.toggle(f,!1),x.classList.toggle("inputInvalid",!1),w.classList.toggle("inputInvalid",!1),L.classList.toggle("inputInvalid",!1),y.style.visibility="hidden",delete b.dataset.mode,delete b.dataset.taskid,delete b.dataset.columnName}function T(){g.innerHTML=Object.keys(d).map((function(t){return function(t){var e=d[t],i=e.map((function(t){return function(t){return'\n        <label for="modal_1" class="task editTask" data-taskid="'+t.id+'">\n            <div class="task__title">'+t.title+'</div>\n            <div class="task__description">'+t.description+'</div>\n            <div class="task__executor">'+t.executor.fullName+"</div>\n        </label>\n        "}(t)})).join("");return'\n    <div class="column" data-columnName="'+t+'">\n        <div class="column__header">\n            <div class="taskCounter">'+e.length+'</div>\n            <div class="column__title">'+t+'</div>\n        </div>\n        <div class="taskList connectedSortable">'+i+'</div>\n        <label for="modal_1" class="addTask">\n            <i class="fas fa-plus"></i>\n            Add task...\n        </label>\n    </div>\n    '}(t)})).join(""),$((function(){$(".taskList").sortable({connectWith:".connectedSortable",stop:function(t,e){for(var i,n,o=e.item[0],a=o.dataset.taskid,r=o.closest(".column").dataset.columnname,s=Array.from(o.parentNode.children).findIndex((function(t){return t.dataset.taskid===a})),c=0,u=Object.keys(d);c<u.length;c++){var m=u[c];if(-1!==(i=d[m].findIndex((function(t){return t.id===Number(a)})))){n=m;break}}var p=l(n,Number(a));d[n].splice(i,1),d[r].splice(s,0,p),T()}}).disableSelection()})),p()}function I(t,e){t.classList.contains(f)&&t.classList.toggle("inputInvalid",e)}document.addEventListener("DOMContentLoaded",(function(){g.addEventListener("click",N),k.addEventListener("click",S),h.addEventListener("click",E),b.addEventListener("focusout",_),x.addEventListener("click",(function(){x.classList.toggle(f,!0)})),w.addEventListener("click",(function(){w.classList.toggle(f,!0)})),L.addEventListener("click",(function(){L.classList.toggle(f,!0)}))})),function(){var t=localStorage.getItem(m);if(t){var e=JSON.parse(t);return r.push.apply(r,e),!0}return!1}()||(r.push(new a("Dmitrii","Kliuev")),r.push(new a("Bob","Ford")),r.push(new a("Mike","Grunt")),localStorage.setItem(m,JSON.stringify(r))),function(){if(!function(){var t,e=localStorage.getItem(u);if(e){for(var i=JSON.parse(e),n=0,o=Object.keys(i);n<o.length;n++){var a=o[n];d[a]||(d[a]=[]),(t=d[a]).push.apply(t,i[a])}return!0}return!1}()){c("in-box",new s({title:"Lorem ipsum dolor",description:"Lorem ipsum dolor sit amet",executor:r[0]}));var t="Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deleniti impedit, incidunt iure quis repellat tempora?";c("in-box",new s({executor:r[1],description:t,title:"mega Do 1"})),c("in-box",new s({executor:r[2],description:t,title:"mega Do 2"})),c("todo",new s({executor:r[0],description:t,title:"mega Do 3"})),c("todo",new s({executor:r[1],description:t,title:"mega Do 4"})),c("in-progress",new s({executor:r[0],description:t,title:"mega Do 5"})),c("review",new s({executor:r[1],description:t,title:"mega Do 6"})),c("done",new s({executor:r[2],description:t,title:"mega Do 7"})),p()}}(),T(),function(){for(var t=document.querySelector(".executor"),e="<option disabled selected value> -- select an option --</option>",i=0,n=r;i<n.length;i++){var o=n[i];e+='<option value="'+o.id+'">'+o.fullName+"</option>"}t.innerHTML=e}()})()})();